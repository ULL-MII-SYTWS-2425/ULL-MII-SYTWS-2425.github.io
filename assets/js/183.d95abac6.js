(window.webpackJsonp=window.webpackJsonp||[]).push([[183],{826:function(e,t,s){"use strict";s.r(t);var n=s(9),a=Object(n.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"deploying-to-vercel-from-an-organization-for-free-using-github-actions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deploying-to-vercel-from-an-organization-for-free-using-github-actions"}},[e._v("#")]),e._v(" Deploying to Vercel from an organization for free using GitHub actions")]),e._v(" "),s("h2",{attrs:{id:"introduction"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#introduction"}},[e._v("#")]),e._v(" Introduction")]),e._v(" "),s("p",[e._v("These are my notes in my experience when reading and reproducing the following articles:")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://gist.github.com/ky28059/1c9af929a9030105da8cf00006b50484#the-solution",target:"_blank",rel:"noopener noreferrer"}},[e._v("Deploying to Vercel from an organization for free using GitHub actions"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://dev.to/chuddyjoachim/nextjs-ci-cd-on-vercel-with-github-actions-7g7",target:"_blank",rel:"noopener noreferrer"}},[e._v("Nextjs CI/CD on Vercel with Github actions"),s("OutboundLink")],1)]),e._v(" "),s("li",[e._v("Here is the GitHub Action repo: "),s("a",{attrs:{href:"https://github.com/amondnet/vercel-action",target:"_blank",rel:"noopener noreferrer"}},[e._v("amondnet/vercel-action"),s("OutboundLink")],1)])]),e._v(" "),s("h2",{attrs:{id:"repo-branches-and-tree"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#repo-branches-and-tree"}},[e._v("#")]),e._v(" repo, branches and tree")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("âžœ  nextra-casiano-rodriguez-leon-alu0100291865 git:(guide) git remote -v \norigin  https://github.com/ULL-MII-SYTWS-2425/nextra-casiano-rodriguez-leon-alu0100291865.git (fetch)\nupstream        https://github.com/ULL-MII-SYTWS-2425/ull-mii-sytws-2425-nextra-nextra-docs-template.git (fetch)\nâžœ  nextra-casiano-rodriguez-leon-alu0100291865 git:(guide) git -P branch -a\n  allrepos\n  auth\n  auth2024\n  dmsi20241028\n* guide\n  loading-message\n  main\n  middleware\n  remotes/origin/HEAD -> origin/main\n  remotes/origin/allrepos\n  remotes/origin/auth\n  remotes/origin/guide\n  remotes/origin/main\n  remotes/upstream/main\nâžœ  nextra-casiano-rodriguez-leon-alu0100291865 git:(guide) tree -I screeenshot.png .github\n.github\nâ””â”€â”€ workflows\n    â””â”€â”€ deploy.yml\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br"),s("span",{staticClass:"line-number"},[e._v("20")]),s("br"),s("span",{staticClass:"line-number"},[e._v("21")]),s("br"),s("span",{staticClass:"line-number"},[e._v("22")]),s("br")])]),s("h2",{attrs:{id:"vercel-cli"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vercel-cli"}},[e._v("#")]),e._v(" Vercel cli")]),e._v(" "),s("p",[e._v("Was installed with node version 20.5.0 and npm version 9.8.0:")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("âžœ  apuntes-pl git:(main) nvm use v20\nNow using node v20.5.0 (npm v9.8.0)\nâžœ  docs git:(main) vercel --version\nVercel CLI 39.1.3\n39.1.3\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br")])]),s("h2",{attrs:{id:"the-solution"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#the-solution"}},[e._v("#")]),e._v(" The solution")]),e._v(" "),s("p",[e._v("The idea is to use GitHub actions as our CI and deploy the project through your personal (hobby) subscription via the "),s("a",{attrs:{href:"https://vercel.com/docs/cli",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vercel CLI"),s("OutboundLink")],1),e._v(". All we need to do locally is to create and link the project to Vercel.")]),e._v(" "),s("p",[e._v("Install the Vercel CLI by running")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("npm i -g vercel\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("Once the Vercel CLI is installed, you need to log in to your Vercel account. Run the following command:")]),e._v(" "),s("div",{staticClass:"language-plaintext line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-plaintext"}},[s("code",[e._v("vercel login\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("This will prompt you to authenticate:")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("âžœ  apuntes-pl git:(main) vercel whoami \nVercel CLI 39.2.6\n> casiano-rodriguez\nâžœ  apuntes-pl git:(main) vercel login\nVercel CLI 39.2.6\n? Log in to Vercel (Use arrow keys)\nâ¯ Continue with GitHub\n  Continue with GitLab\n  Continue with Bitbucket\n  Continue with Email\n  Continue with SAML Single Sign-On\n â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  Cancel\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br")])]),s("p",[e._v("If we choose GitHub, we will be asked to authenticate with GitHub:")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("? Log in to Vercel Continue with GitHub\n> Success! GitHub authentication complete for crguezl@ull.edu.es\nCongratulations! You are now logged in. In order to deploy something, run `vercel`.\nðŸ’¡  Connect your Git Repositories to deploy every branch push automatically (https://vercel.link/git).\nâžœ  apuntes-pl git:(main) vercel whoami\nVercel CLI 39.2.6\n> crguezl\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br")])]),s("p",[e._v("In your project directory, link the project to Vercel by running")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("vercel\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[e._v("As scope use your own username")]),e._v(" "),s("p",[e._v("The CLI will prompt you about project details;")]),e._v(" "),s("ul",[s("li",[e._v("when asked for a deployment scope, "),s("strong",[e._v("choose your own username")]),e._v(".")])]),e._v(" "),s("p",[e._v("This should initialize the project on Vercel under your personal account, and automatically detect and configure the framework and build presets.")])]),e._v(" "),s("p",[s("img",{attrs:{src:"https://gist.github.com/assets/60120929/3d26d90b-c33b-4f46-9c72-8e1dbe7a31be",alt:"image"}})]),e._v(" "),s("p",[e._v("After successfully initializing a project, the CLI will create a "),s("code",[e._v(".vercel")]),e._v(" directory containing a generated "),s("code",[e._v("project.json")]),e._v(" that looks something like this:")]),e._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"orgId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"..."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"projectId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"..."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("This will give you the "),s("code",[e._v("orgId")]),e._v(" and "),s("code",[e._v("projectId")]),e._v(" needed to deploy the project via the CLI!.")]),e._v(" "),s("h2",{attrs:{id:"github-workflows-deploy-yml"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#github-workflows-deploy-yml"}},[e._v("#")]),e._v(" .github/workflows/deploy.yml")]),e._v(" "),s("p",[e._v("The GitHub action is defined in the file "),s("code",[e._v(".github/workflows/deploy.yml")]),e._v(". It needs the secrets\n"),s("code",[e._v("ORG_ID")]),e._v(" and "),s("code",[e._v("PROJECT_ID")]),e._v(" that were obtained before and will be stored as secrets in the repository settings.")]),e._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[e._v("âžœ  nextra"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("casiano"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("rodriguez"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("leon"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("alu0100291865 git"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("(guide) cat .github/workflows/deploy.yml \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# vercel-merge.yml")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" Deploy to vercel on merge\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("branches")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" guide\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("jobs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("build_and_deploy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("runs-on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" ubuntu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("latest\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("steps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" actions/checkout@v4\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" amondnet/vercel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("action@v20\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("vercel-token")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" secrets.VERCEL_TOKEN "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("github-token")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" secrets.GITHUB_TOKEN "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("vercel-args")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'--prod'")]),e._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("vercel-org-id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" secrets.ORG_ID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("vercel-project-id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" secrets.PROJECT_ID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br")])]),s("h2",{attrs:{id:"vercel-token"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vercel-token"}},[e._v("#")]),e._v(" VERCEL_TOKEN")]),e._v(" "),s("p",[e._v("After you've logged in, you can create an access token by navigating to your Account Settings on the Vercel website. Here's how:")]),e._v(" "),s("ol",[s("li",[e._v("Go to "),s("a",{attrs:{href:"https://vercel.com/account/tokens",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://vercel.com/account/tokens"),s("OutboundLink")],1)]),e._v(" "),s("li",[e._v('Click on the "Create" button to open the create token modal')]),e._v(" "),s("li",[e._v("Enter a descriptive name for your token")]),e._v(" "),s("li",[e._v("Choose the scope of access for the token from the dropdown")]),e._v(" "),s("li",[e._v('Click "Create Token"')]),e._v(" "),s("li",[e._v("Once created, make sure to copy the token immediately. It will only be shown once for security reasons .")]),e._v(" "),s("li",[e._v("You can now use this token in your deployment scripts or CI/CD pipelines. For example, you might set it as an environment variable named "),s("code",[e._v("VERCEL_TOKEN")]),e._v(" .")])]),e._v(" "),s("p",[e._v("Here's an example of how you might use these in a deployment script:")]),e._v(" "),s("div",{staticClass:"language-shellscript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("vercel pull --yes --environment=production --token=$VERCEL_TOKEN\nvercel build --prod --token=$VERCEL_TOKEN\nvercel deploy --prebuilt --prod --token=$VERCEL_TOKEN\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("p",[e._v("This script pulls the latest environment variables, builds the project, and deploys it to production .")]),e._v(" "),s("h2",{attrs:{id:"secrets"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#secrets"}},[e._v("#")]),e._v(" Secrets")]),e._v(" "),s("p",[e._v("To set the secrets go to the repository settings and click on the secrets tab.\nChoose "),s("code",[e._v("actions")]),e._v(" and add the following secrets:")]),e._v(" "),s("p",[s("img",{attrs:{src:"/images/nextjs/vercel-action-secrets.png",alt:"/images/nextjs/vercel-action-secrets.png"}})]),e._v(" "),s("h2",{attrs:{id:"the-workflow-running-in-github"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#the-workflow-running-in-github"}},[e._v("#")]),e._v(" The workflow running in GitHub")]),e._v(" "),s("p",[s("img",{attrs:{src:"/images/nextjs/vercel-action-github.png",alt:"/images/nextjs/vercel-action-github.png"}})]),e._v(" "),s("h2",{attrs:{id:"errors-and-fixing-them"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#errors-and-fixing-them"}},[e._v("#")]),e._v(" Errors and Fixing them")]),e._v(" "),s("p",[e._v("The building finishes, but after it, there is a warning followed by an error:")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Warning: The `set-output` command is deprecated and will be disabled soon. \nPlease upgrade to using Environment Files. \nFor more information see: \nhttps://github.blog/changelog2022-10-11-github-actions-deprecating-save-state-and-set-output-commands/\nthis is push event\nfind comment\nprevious comment not found\nError: Resource not accessible by integration\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br")])]),s("p",[e._v("See the following issues at the action repo:")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/amondnet/vercel-action/issues/217",target:"_blank",rel:"noopener noreferrer"}},[e._v("issue set-output command warning #217"),s("OutboundLink")],1),e._v(" a")]),e._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/amondnet/vercel-action/issues/235",target:"_blank",rel:"noopener noreferrer"}},[e._v("issue Resource not accessible by integration #235"),s("OutboundLink")],1)])]),e._v(" "),s("p",[s("img",{attrs:{src:"/images/nextjs/vercel-action-error.png",alt:"/images/nextjs/vercel-action-error.png"}})]),e._v(" "),s("p",[e._v("You need to grant both read and write permissions for the workflows in the repository and the organisation, if the repo is part of one.\nSee this topic: "),s("a",{attrs:{href:"https://github.com/orgs/community/discussions/21061",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/orgs/community/discussions/21061"),s("OutboundLink")],1)]),e._v(" "),s("p",[s("img",{attrs:{src:"/images/nextjs/vercel-action-workflow-permissions.png",alt:"/images/nextjs/vercel-action-workflow-permissions.png"}})]),e._v(" "),s("p",[e._v("The change must be done by an owner of the organization:")]),e._v(" "),s("p",[s("img",{attrs:{src:"/images/nextjs/vercel-action-changing-workflow-permissions.png",alt:"/images/nextjs/vercel-action-changing-workflow-permissions.png"}})]),e._v(" "),s("p",[e._v("Once it is done, the action runs successfully:")]),e._v(" "),s("p",[s("img",{attrs:{src:"/images/nextjs/vercel-action-working.png",alt:"/images/nextjs/vercel-action-working.png"}})]),e._v(" "),s("h2",{attrs:{id:"see-also"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#see-also"}},[e._v("#")]),e._v(" See also")]),e._v(" "),s("ul",[s("li",[e._v("Section "),s("RouterLink",{attrs:{to:"/nextjs/vercel-deployment/"}},[e._v("Deploy to vercel your Next.js App")]),e._v(" in this notes")],1)])])}),[],!1,null,null,null);t.default=a.exports}}]);