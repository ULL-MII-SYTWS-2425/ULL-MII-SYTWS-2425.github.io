(window.webpackJsonp=window.webpackJsonp||[]).push([[175],{821:function(e,t,s){"use strict";s.r(t);var a=s(9),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"next-auth"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#next-auth"}},[e._v("#")]),e._v(" Next-auth")]),e._v(" "),s("h2",{attrs:{id:"middleware"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#middleware"}},[e._v("#")]),e._v(" Middleware")]),e._v(" "),s("p",[e._v("Middleware allows you to run code before a request is completed.\nThen, based on the incoming request, you can modify the response by\nrewriting, redirecting, modifying the request or response headers, or responding directly.")]),e._v(" "),s("p",[e._v("Use the file "),s("code",[e._v("middleware.ts")]),e._v(" (or "),s("code",[e._v("middleware.js")]),e._v(") in the root of your project to define\nMiddleware.\nFor example, at the same level as "),s("code",[e._v("pages")]),e._v(" or "),s("code",[e._v("app")]),e._v(", or inside "),s("code",[e._v("src")]),e._v(" if applicable.")]),e._v(" "),s("p",[e._v("File "),s("code",[e._v("/middleware.js")])]),e._v(" "),s("div",{staticClass:"language-js  showLineNumbers copy line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("export")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("default")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("from")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"next-auth/middleware"')]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("export")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" config "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("matcher")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"/clases"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"/labs"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("p",[e._v("When we want to secure certain pages, we export a "),s("code",[e._v("config")]),e._v(" object with a "),s("code",[e._v("matcher")]),e._v(" property.\nNow we will still be able to visit every page, but only "),s("code",[e._v("/clases")]),e._v(" and "),s("code",[e._v("/labs")]),e._v(" will require authentication\nbut I can visit "),s("code",[e._v("/topics")]),e._v(".")]),e._v(" "),s("p",[e._v("On platforms like Vercel, Middleware is run at the "),s("a",{attrs:{href:"https://nextjs.org/docs/api-reference/edge-runtime",target:"_blank",rel:"noopener noreferrer"}},[e._v("Edge"),s("OutboundLink")],1)]),e._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[e._v("Edge")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://nextjs.org/docs/api-reference/edge-runtime",target:"_blank",rel:"noopener noreferrer"}},[e._v("Edge"),s("OutboundLink")],1),e._v(" servers are distributed to multiple locations around the world. Unlike CDNs, which store static content, Edge servers can run small snippets of code. Edge computing supports not only transmitting cached data but other types of computing like live streaming and gaming.")])]),e._v(" "),s("ul",[s("li",[e._v("See the section "),s("a",{attrs:{href:"https://next-auth.js.org/configuration/nextjs#middleware",target:"_blank",rel:"noopener noreferrer"}},[e._v("Middleware"),s("OutboundLink")],1),e._v(" on the next-auth.js docs")]),e._v(" "),s("li",[e._v("See also "),s("a",{attrs:{href:"https://next-auth.js.org/configuration/nextjs#basic-usage",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://next-auth.js.org/configuration/nextjs#basic-usage"),s("OutboundLink")],1)]),e._v(" "),s("li",[e._v("Midleware in Next.js: "),s("a",{attrs:{href:"https://nextjs.org/docs/pages/building-your-application/routing/middleware",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://nextjs.org/docs/pages/building-your-application/routing/middleware"),s("OutboundLink")],1)]),e._v(" "),s("li",[e._v("See the section "),s("a",{attrs:{href:"/temas/web/nextjs/middleware"}},[e._v("Organizing Next.js Middleware")])])]),e._v(" "),s("h2",{attrs:{id:"pages"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pages"}},[e._v("#")]),e._v(" Pages")]),e._v(" "),s("p",[e._v("NextAuth.js automatically creates simple, unbranded authentication pages for handling\nSign in, Sign out, Email Verification and displaying error messages.")]),e._v(" "),s("p",[e._v("To add a custom login page, you can use the pages option:")]),e._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[e._v("pages"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("api"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("auth"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("...")]),e._v("nextauth"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("js\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("...")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("pages")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("signIn")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'/auth/signin'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("signOut")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'/auth/signout'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("error")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'/auth/error'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Error code passed in query string as ?error=")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("verifyRequest")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'/auth/verify-request'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// (used for check email message)")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("newUser")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'/auth/new-user'")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// New users will be directed here on first sign in (leave the property out if not of interest)")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("...")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br")])])])}),[],!1,null,null,null);t.default=r.exports}}]);