(window.webpackJsonp=window.webpackJsonp||[]).push([[186],{830:function(e,s,n){"use strict";n.r(s);var a=n(9),t=Object(a.a)({},(function(){var e=this,s=e.$createElement,n=e._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h2",{attrs:{id:"can-you-give-me-a-easy-example-of-how-to-set-up-a-json-web-token-in-a-next-js-simple-app-i-have-no-experience-with-jwt"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#can-you-give-me-a-easy-example-of-how-to-set-up-a-json-web-token-in-a-next-js-simple-app-i-have-no-experience-with-jwt"}},[e._v("#")]),e._v(" Can you give me a easy example of how to set up a json web token in a next.js simple app?.  I have no experience with JWT")]),e._v(" "),n("p",[e._v("I'd be happy to provide you with an easy example of how to set up JSON Web Tokens (JWT) in a simple Next.js app. Since you're new to JWT, I'll break it down step by step and explain each part.")]),e._v(" "),n("p",[e._v("First, let's create the necessary files for our example:")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v(".\n├── README.md\n├── components\n│   └── LoginForm.jsx\n├── jsconfig.json\n├── lib\n│   └── auth.js\n├── next.config.mjs\n├── package-lock.json\n├── package.json\n├── pages\n│   ├── _app.js\n│   ├── _document.js\n│   ├── api\n│   │   ├── github-repos\n│   │   │   └── [username].js\n│   │   ├── hello.js\n│   │   └── login.js\n│   ├── dashboard.jsx\n│   ├── fonts\n│   │   ├── GeistMonoVF.woff\n│   │   └── GeistVF.woff\n│   ├── index.js\n│   └── user\n│       └── [username].jsx\n├── postcss.config.mjs\n├── public\n│   ├── favicon.ico\n│   ├── file.svg\n│   ├── globe.svg\n│   ├── next.svg\n│   ├── vercel.svg\n│   └── window.svg\n├── styles\n│   └── globals.css\n└── tailwind.config.js\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br"),n("span",{staticClass:"line-number"},[e._v("16")]),n("br"),n("span",{staticClass:"line-number"},[e._v("17")]),n("br"),n("span",{staticClass:"line-number"},[e._v("18")]),n("br"),n("span",{staticClass:"line-number"},[e._v("19")]),n("br"),n("span",{staticClass:"line-number"},[e._v("20")]),n("br"),n("span",{staticClass:"line-number"},[e._v("21")]),n("br"),n("span",{staticClass:"line-number"},[e._v("22")]),n("br"),n("span",{staticClass:"line-number"},[e._v("23")]),n("br"),n("span",{staticClass:"line-number"},[e._v("24")]),n("br"),n("span",{staticClass:"line-number"},[e._v("25")]),n("br"),n("span",{staticClass:"line-number"},[e._v("26")]),n("br"),n("span",{staticClass:"line-number"},[e._v("27")]),n("br"),n("span",{staticClass:"line-number"},[e._v("28")]),n("br"),n("span",{staticClass:"line-number"},[e._v("29")]),n("br"),n("span",{staticClass:"line-number"},[e._v("30")]),n("br"),n("span",{staticClass:"line-number"},[e._v("31")]),n("br"),n("span",{staticClass:"line-number"},[e._v("32")]),n("br"),n("span",{staticClass:"line-number"},[e._v("33")]),n("br"),n("span",{staticClass:"line-number"},[e._v("34")]),n("br"),n("span",{staticClass:"line-number"},[e._v("35")]),n("br"),n("span",{staticClass:"line-number"},[e._v("36")]),n("br")])]),n("p",[e._v("Now, let me explain how this JWT setup works:")]),e._v(" "),n("ol",[n("li",[e._v("In "),n("code",[e._v("auth.ts")]),e._v(", we define functions for finding users, generating tokens, and verifying tokens. The "),n("code",[e._v("generateToken")]),e._v(" function creates a JWT with the user's ID, and "),n("code",[e._v("verifyToken")]),e._v(" checks if a token is valid.")]),e._v(" "),n("li",[e._v("The "),n("code",[e._v("LoginForm")]),e._v(" component is a client-side form that sends a POST request to "),n("code",[e._v("/api/login")]),e._v(" with the user's credentials.")]),e._v(" "),n("li",[e._v("The "),n("code",[e._v("/api/login")]),e._v(" route checks the credentials, generates a token if they're valid, and sets it as an HTTP-only cookie.")]),e._v(" "),n("li",[e._v("The "),n("code",[e._v("Dashboard")]),e._v(" page is protected. It checks for the presence of a valid token in the cookies. If there's no valid token, it redirects to the home page.")]),e._v(" "),n("li",[e._v("The main page ("),n("code",[e._v("page.tsx")]),e._v(") simply displays the login form.")])]),e._v(" "),n("p",[e._v("To use this example:")]),e._v(" "),n("ol",[n("li",[e._v("Install the required package: "),n("code",[e._v("npm install jsonwebtoken")])]),e._v(" "),n("li",[e._v("Run your Next.js app")]),e._v(" "),n("li",[e._v('Visit the home page and try logging in with "user1" and "password1"')]),e._v(" "),n("li",[e._v("If successful, you'll be redirected to the dashboard")])]),e._v(" "),n("p",[e._v("Remember, this is a basic example for learning purposes. In a real-world application, you would:")]),e._v(" "),n("ul",[n("li",[e._v("Use a proper database instead of an in-memory store")]),e._v(" "),n("li",[e._v("Store hashed passwords, not plaintext")]),e._v(" "),n("li",[e._v("Use environment variables for secrets")]),e._v(" "),n("li",[e._v("Implement proper error handling and user feedback")]),e._v(" "),n("li",[e._v("Add logout functionality")]),e._v(" "),n("li",[e._v("Consider using a library like "),n("code",[e._v("next-auth")]),e._v(" for more comprehensive authentication features")])]),e._v(" "),n("p",[e._v("I hope this helps you understand the basics of setting up JWT in a Next.js app! Let me know if you have any questions.")]),e._v(" "),n("h2",{attrs:{id:"pages-and-js"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#pages-and-js"}},[e._v("#")]),e._v(" pages and js")]),e._v(" "),n("p",[e._v("I'll modify the previous example to use the Pages Router and JavaScript instead of TypeScript. I'll update the necessary files and explain the changes.")]),e._v(" "),e._v('" line-numbers-mode">'),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("...\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")]),n("p",[e._v("Now, let me explain the changes and how this JWT setup works with the Pages Router:")]),e._v(" "),n("ol",[n("li",[e._v("We've converted all files from TypeScript (.ts/.tsx) to JavaScript (.js/.jsx) and removed type annotations.")]),e._v(" "),n("li",[e._v("In "),n("code",[e._v("lib/auth.js")]),e._v(", the functions remain largely the same, but we've removed TypeScript-specific syntax.")]),e._v(" "),n("li",[e._v("The "),n("code",[e._v("LoginForm")]),e._v(" component in "),n("code",[e._v("components/LoginForm.jsx")]),e._v(" is now a .jsx file, but its functionality remains the same.")]),e._v(" "),n("li",[e._v("The login API route is now in "),n("code",[e._v("pages/api/login.js")]),e._v(". In the Pages Router, API routes are placed in the "),n("code",[e._v("pages/api")]),e._v(" directory. The logic is similar, but we're using "),n("code",[e._v("req")]),e._v(" and "),n("code",[e._v("res")]),e._v(" objects directly instead of using "),n("code",[e._v("NextResponse")]),e._v(".")]),e._v(" "),n("li",[e._v("The "),n("code",[e._v("Dashboard")]),e._v(" page is now in "),n("code",[e._v("pages/dashboard.js")]),e._v(". With the Pages Router, we use "),n("code",[e._v("getServerSideProps")]),e._v(" for server-side rendering and authentication checking. We also added a client-side check using "),n("code",[e._v("useEffect")]),e._v(" for an extra layer of protection.")]),e._v(" "),n("li",[e._v("The main page ("),n("code",[e._v("pages/index.js")]),e._v(") remains similar, just with the file extension changed to .js.")])]),e._v(" "),n("p",[e._v("To use this example:")]),e._v(" "),n("ol",[n("li",[e._v("Install the required package: "),n("code",[e._v("npm install jsonwebtoken")])]),e._v(" "),n("li",[e._v("Run your Next.js app")]),e._v(" "),n("li",[e._v('Visit the home page and try logging in with "user1" and "password1"')]),e._v(" "),n("li",[e._v("If successful, you'll be redirected to the dashboard")])]),e._v(" "),n("p",[e._v("Remember, this is still a basic example for learning purposes. In a real-world application, you would want to implement the same security measures mentioned in the previous response.")]),e._v(" "),n("p",[e._v("This setup demonstrates how to implement basic JWT authentication in a Next.js app using the Pages Router and JavaScript. The core concepts remain the same as in the TypeScript/App Router version, but the implementation details are adjusted to fit the Pages Router structure.")])])}),[],!1,null,null,null);s.default=t.exports}}]);