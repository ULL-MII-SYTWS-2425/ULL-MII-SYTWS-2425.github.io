(window.webpackJsonp=window.webpackJsonp||[]).push([[112],{754:function(e,t,n){"use strict";n.r(t);var a=n(9),s=Object(a.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"the-javascript-render-queue"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#the-javascript-render-queue"}},[e._v("#")]),e._v(" The JavaScript Render Queue")]),e._v(" "),n("p",[e._v("The "),n("strong",[e._v("JavaScript render queue")]),e._v(" refers to the process by which the browser schedules and manages rendering tasks\n(like "),n("a",{attrs:{href:"painting-layout-compositing"}},[e._v("painting, layout, and compositing")]),e._v(") alongside JavaScript execution. Understanding the render queue requires a basic knowledge of how the "),n("strong",[e._v("browser's event loop")]),e._v(" operates, and how rendering is handled within this loop.")]),e._v(" "),n("h3",{attrs:{id:"key-concepts"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#key-concepts"}},[e._v("#")]),e._v(" Key Concepts:")]),e._v(" "),n("ol",[n("li",[n("p",[n("strong",[e._v("JavaScript and the Event Loop")]),e._v(":")]),e._v(" "),n("ul",[n("li",[e._v("JavaScript is "),n("strong",[e._v("single-threaded")]),e._v(", meaning it executes one task at a time.")]),e._v(" "),n("li",[e._v("The browser uses an "),n("strong",[e._v("event loop")]),e._v(" to manage JavaScript execution and other tasks (like rendering, handling user inputs, network requests, etc.).")]),e._v(" "),n("li",[e._v("The event loop consists of two main phases:\n"),n("ul",[n("li",[n("strong",[e._v("JavaScript execution")]),e._v(" (task queue)")]),e._v(" "),n("li",[n("strong",[e._v("Rendering updates")]),e._v(" (render queue)")])])])])]),e._v(" "),n("li",[n("p",[n("strong",[e._v("The Render Queue")]),e._v(":")]),e._v(" "),n("ul",[n("li",[e._v("The "),n("strong",[e._v("render queue")]),e._v(" is responsible for updating the "),n("strong",[e._v("visual representation")]),e._v(" of the page (e.g., painting elements, updating the layout, etc.).")]),e._v(" "),n("li",[e._v("The browser attempts to render the page at a regular interval (typically every 16.67ms, aiming for 60 frames per second).")]),e._v(" "),n("li",[n("strong",[e._v("Rendering tasks")]),e._v(" include layout recalculation, style application, painting (drawing pixels on the screen), and compositing (combining layers).")])])]),e._v(" "),n("li",[n("p",[n("strong",[e._v("How It Works")]),e._v(":")]),e._v(" "),n("ul",[n("li",[e._v("After "),n("strong",[e._v("JavaScript code")]),e._v(" executes (or when an event, like a user interaction, triggers a reflow), the browser places a "),n("strong",[e._v("render task")]),e._v(" in the queue for the next rendering frame.")]),e._v(" "),n("li",[e._v("The browser may "),n("strong",[e._v("batch rendering tasks")]),e._v(" together for efficiency to avoid unnecessary layouts and paints. For example, if you make multiple DOM changes in quick succession, the browser will likely group these updates together before re-rendering.")]),e._v(" "),n("li",[e._v("JavaScript can "),n("strong",[e._v("block rendering")]),e._v(" if it runs too long, which is why long-running tasks or heavy computations can cause the page to appear unresponsive ("),n("a",{attrs:{href:"jank"}},[e._v("jank")]),e._v(").")]),e._v(" "),n("li",[e._v("The rendering process generally occurs "),n("strong",[e._v("after")]),e._v(" JavaScript execution and before the next frame is displayed.")])])]),e._v(" "),n("li",[n("p",[n("strong",[e._v("Frame Rendering")]),e._v(":")]),e._v(" "),n("ul",[n("li",[e._v("The browser tries to maintain a consistent "),n("strong",[e._v("frame rate")]),e._v(" (typically 60fps) by ensuring that both JavaScript execution and rendering are completed within the 16.67ms time window.")]),e._v(" "),n("li",[e._v("After the JavaScript task queue is cleared, the browser checks for "),n("strong",[e._v("style recalculations, layout changes, and paint operations")]),e._v(". If necessary, these rendering tasks are processed.")]),e._v(" "),n("li",[e._v("After the rendering phase, the browser will display the updated frame on the screen.")])])]),e._v(" "),n("li",[n("p",[n("strong",[e._v("Impact of JavaScript on Rendering")]),e._v(":")]),e._v(" "),n("ul",[n("li",[e._v("If JavaScript takes too long to run, it can delay the rendering process, causing the browser to miss a frame, which results in "),n("strong",[e._v("jank")]),e._v(" (stuttering or slow visual updates).")]),e._v(" "),n("li",[e._v("JavaScript updates that modify the "),n("strong",[e._v("DOM")]),e._v(" or "),n("strong",[e._v("CSSOM")]),e._v(" (like changing element sizes or styles) will force the browser to recalculate layout and potentially repaint the screen.")]),e._v(" "),n("li",[e._v("The browser is optimized to "),n("strong",[e._v("batch DOM changes")]),e._v(" whenever possible, and only repaint the screen after JavaScript execution finishes.")])])])]),e._v(" "),n("h3",{attrs:{id:"interaction-between-javascript-and-rendering"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#interaction-between-javascript-and-rendering"}},[e._v("#")]),e._v(" Interaction Between JavaScript and Rendering:")]),e._v(" "),n("ol",[n("li",[n("p",[n("strong",[e._v("Reflows and Repaints")]),e._v(":")]),e._v(" "),n("ul",[n("li",[n("strong",[e._v("Reflows")]),e._v(" (or layout recalculations) happen when an element's size, position, or dimensions are changed, forcing the browser to recalculate the layout for affected elements.")]),e._v(" "),n("li",[n("strong",[e._v("Repaints")]),e._v(" occur when changes to visual elements (like colors, visibility, or text) do not require recalculating the layout but do require updating pixels on the screen.")])])]),e._v(" "),n("li",[n("p",[n("strong",[e._v("Optimizing for Performance")]),e._v(":")]),e._v(" "),n("ul",[n("li",[e._v("Minimize DOM manipulations in tight loops or rapidly executed code, as they can trigger multiple reflows and repaints, which may negatively impact performance.")]),e._v(" "),n("li",[e._v("Use techniques like "),n("strong",[e._v("debouncing")]),e._v(" or "),n("strong",[e._v("throttling")]),e._v(" to limit how often JavaScript updates that affect rendering are processed.")]),e._v(" "),n("li",[e._v("Consider using "),n("code",[e._v("requestAnimationFrame()")]),e._v(" for smooth animations. This function allows JavaScript to schedule code to run "),n("strong",[e._v("before the next repaint")]),e._v(", ensuring the code is executed in sync with the browser's rendering cycle.")])])]),e._v(" "),n("li",[n("p",[n("strong",[e._v("Microtasks vs Macrotasks")]),e._v(":")]),e._v(" "),n("ul",[n("li",[n("strong",[e._v("Microtasks")]),e._v(" (like "),n("code",[e._v("Promise")]),e._v(" callbacks) run immediately after the current task finishes, before the browser has a chance to render.")]),e._v(" "),n("li",[n("strong",[e._v("Macrotasks")]),e._v(" (like "),n("code",[e._v("setTimeout")]),e._v(") get queued to run after rendering, ensuring smoother interaction with the render cycle.")])])])]),e._v(" "),n("h3",{attrs:{id:"example"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#example"}},[e._v("#")]),e._v(" Example:")]),e._v(" "),n("p",[e._v("Letâ€™s consider an example where you modify the DOM inside a loop:")]),e._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("for")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("let")]),e._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[e._v("appendChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[e._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[e._v("'div'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br")])]),n("ul",[n("li",[e._v("Each DOM change in the loop might cause a "),n("strong",[e._v("layout recalculation")]),e._v(" and "),n("strong",[e._v("repaint")]),e._v(", which is inefficient. The browser may optimize this by batching multiple updates, but if the loop is complex or involves heavy calculations, it could cause jank.")])]),e._v(" "),n("p",[e._v("In contrast, if you use "),n("code",[e._v("document.createDocumentFragment()")]),e._v(" to append multiple elements at once, the browser can handle these changes more efficiently by updating the layout and rendering only once.")])])}),[],!1,null,null,null);t.default=s.exports}}]);